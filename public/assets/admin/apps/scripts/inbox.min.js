var AppInbox = function () {
    var t = $("#msg_details"), e = "", n = function (n, o) { }, o = function (e, n, o) {
        var i = $('#view_msg_url').attr('value');
        App.blockUI({ target: t, overlayColor: "none", animate: !0 }), p(e);
        var a = e.parent("tr").attr("data-messageid");
        
        var f_name = $('#folder_name').attr('value') ;
        if (typeof f_name === typeof undefined || f_name === false) {
            f_name = 'Inbox';
        }        
        window.location.href = i+'?folder_name='+f_name +'&message_id='+a;        
    }, i = function () {
        $(".inbox-wysihtml5").wysihtml5({stylesheets: ["../assets/global/plugins/bootstrap-wysihtml5/wysiwyg-color.css"]})
    }, a = function () {
        $("#fileupload").fileupload({url: "/public/assets/admin/global/plugins/jquery-file-upload/server/php/", autoUpload: !0}), $.support.cors && $.ajax({url: "/public/assets/admin/global/plugins/jquery-file-upload/server/php/", type: "HEAD"}).fail(function () {
            $('<span class="alert alert-error"/>').text("Upload server currently unavailable - " + new Date).appendTo("#fileupload")
        })
    }, c = function (e) {
        var n = "app_inbox_compose.html";
        App.blockUI({target: t, overlayColor: "none", animate: !0}), p(e), $.ajax({type: "GET", cache: !1, url: n, dataType: "html", success: function (n) {
                App.unblockUI(t), p(e), $(".inbox-nav > li.active").removeClass("active"), $(".inbox-header > h1").text("Compose"), t.html(n), a(), i(), $(".inbox-wysihtml5").focus(), Layout.fixContentHeight()
            }, error: function (t, n, o) {
                p(e)
            }, async: !1})
    }, l = function (e) {
        var n = $('#reply_msg_url').attr('value');        
        window.location.href = n ;
    }, p = function (t) {
        "undefined" != typeof t && (t.attr("disabled") ? t.attr("disabled", !1) : t.attr("disabled", !0))
    };
    return{init: function () {
            $(".inbox").on("click", ".compose-btn", function () {
                c($(this))
            }), $(".inbox").on("click", ".inbox-discard-btn", function (t) {
                t.preventDefault(), n($(this), e)
            }), $(".inbox").on("click", ".reply-btn", function () {
                l($(this))
            }), $(".inbox").on("click", "td.view-message", function () {
                o($(this))
            }), $(".inbox-nav > li > a").click(function () {
                n($(this), "inbox")
            }), "view" === App.getURLParameter("a") ? o() : "compose" === App.getURLParameter("a") ? c() : $(".inbox-nav > li:first > a").click()
        }}
}();
jQuery(document).ready(function () {
    AppInbox.init()
});